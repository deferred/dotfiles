{{- if eq .chezmoi.os "darwin" -}}

#!/usr/bin/env bash

###############################################################################
# Dock                                                                        #
###############################################################################

# Automatically hide and show the Dock
defaults write com.apple.dock autohide -bool true

# Dock opening delay
defaults write com.apple.dock autohide-delay -float 0.1

# Animation time when hiding/showing the Dock
defaults write com.apple.dock autohide-time-modifier -float 0.2

# Don’t automatically rearrange Spaces based on most recent use
defaults write com.apple.dock mru-spaces -bool false

# Don’t show recent applications in Dock
defaults write com.apple.dock show-recents -bool false

# Show only open applications in the Dock
defaults write com.apple.dock static-only -bool true

# Click wallpaper to reveal Desktop only in Stage Manager, needed for yabai
defaults write com.apple.WindowManager EnableStandardClickToShowDesktop -bool false

###############################################################################
# Finder                                                                      #
###############################################################################

# Avoid creating .DS_Store files on network or USB volumes
defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool true
defaults write com.apple.desktopservices DSDontWriteUSBStores -bool true

# Show hidden files by default
defaults write com.apple.finder AppleShowAllFiles -bool true

# When performing a search, search the current folder by default
defaults write com.apple.finder FXDefaultSearchScope -string "SCcf"

# Use list view in all Finder windows by default
# Four-letter codes for the other view modes: `icnv`, `clmv`, `glyv`
defaults write com.apple.finder FXPreferredViewStyle -string "Nlsv"

# Remove items from Trash after 30 days
defaults write com.apple.finder FXRemoveOldTrashItems -bool true

# Show path bar
defaults write com.apple.finder ShowPathbar -bool true

# Show status bar
defaults write com.apple.finder ShowStatusBar -bool true
#
# Show all filename extensions
defaults write NSGlobalDomain AppleShowAllExtensions -bool true

for app in \
	"Dock" \
	"Finder" \
	; \
do \
	killall "${app}" &> /dev/null
done

{{ end -}}

